(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{3906:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/music/recently-listened",function(){return l(7663)}])},7663:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return f}});var a=l(5893),t=l(281),n=function(e,s){var l=Math.floor((e-s)/1e3),a=Math.floor(l/86400),t=Math.floor((0===a?l:l-86400*a)/3600);return{dayElapsed:a,hourElapsed:t,minElapsed:Math.floor((0===a&&0===t?l:l-86400*a-3600*t)/60),secRemainder:l%60}},c=l(7294),r=function(e){var s=e.track,l=(0,c.useMemo)(function(){var e;return"@attr"in s&&(null===(e=s["@attr"])||void 0===e?void 0:e.nowplaying)},[s]),r=(0,c.useMemo)(function(){if("date"in s)return n(Date.now(),1e3*Number(s.date.uts))},[s]);return(0,a.jsxs)("div",{className:"flex gap-1 py-2",children:[(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)("img",{src:s.image[2]["#text"],width:40,height:40,alt:"album-cover"})}),(0,a.jsxs)("a",{className:"flex-[2] flex-col flex justify-center",href:s.url,target:"_blank",children:[(0,a.jsx)("div",{children:s.name}),(0,a.jsx)("div",{className:"text-xs text-grey-300",children:s.album["#text"]})]}),(0,a.jsx)("div",{className:"flex-1 flex items-center text-xs md:text-base",children:s.artist.name}),(0,a.jsx)("div",{className:"flex-1 flex gap-2 text-grey-600 items-center text-xs md:text-base",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.x,{}),(0,a.jsx)("div",{children:"Now playing"})]}):r?r.dayElapsed>0?"".concat(r.dayElapsed," day").concat(r.dayElapsed>1?"s":""," ago"):r.hourElapsed>0?"".concat(r.hourElapsed," hr").concat(r.hourElapsed>1?"s":""," ago"):"".concat(r.minElapsed," min ago"):""})]})},i=l(8256),d=l(1664),x=l.n(d),f=function(){var e=(0,i.q)(),s=e.init,l=e.latestTracks;return(0,c.useEffect)(function(){s()},[]),(0,a.jsx)("div",{className:"flex h-full p-8",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,a.jsx)("h4",{children:(0,a.jsx)(x(),{href:"/",children:"@jz-dot-meng"})}),(0,a.jsxs)("div",{className:"flex items-start flex-col gap-1 md:items-end md:flex-row",children:[(0,a.jsx)("h1",{children:"recently listened"}),(0,a.jsx)("span",{className:"pb-2",children:" :: live data for your perusal"})]})]}),(0,a.jsxs)("section",{className:"py-4 md:py-8 flex flex-col md:flex-row gap-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex flex-[2] flex-col gap-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex gap-1 p-2 border-b border-white text-sm",children:[(0,a.jsx)("div",{className:"flex-1 flex items-center"}),(0,a.jsx)("div",{className:"flex-[2] flex items-center",children:"Name & Album"}),(0,a.jsx)("div",{className:"flex-1 flex items-center",children:"Artist"}),(0,a.jsx)("div",{className:"flex-1 flex items-center",children:"Last listened"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-1 overflow-y-scroll no-scrollbar",children:l.map(function(e,s){return(0,a.jsx)(r,{track:e},"".concat(s,"-").concat(e.mbid))})})]}),(0,a.jsx)("div",{className:"flex flex-1"})]})]})})}}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=3906)}),_N_E=e.O()}]);