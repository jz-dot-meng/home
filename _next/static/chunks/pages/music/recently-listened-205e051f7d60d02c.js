(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{3906:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/music/recently-listened",function(){return t(709)}])},709:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a,c=t(1309),l=t(5893),n=function(e,s){var t=Math.floor((e-s)/1e3),a=Math.floor(t/86400),c=Math.floor((0===a?t:t-86400*a)/3600);return{dayElapsed:a,hourElapsed:c,minElapsed:Math.floor((0===a&&0===c?t:t-86400*a-3600*c)/60),secRemainder:t%60}},r=t(1010),i=t(655),d=(a=(0,r._)(function(e){return(0,i.Jh)(this,function(s){var t;return[2,fetch(e).then((t=(0,r._)(function(e){var s;return(0,i.Jh)(this,function(t){switch(t.label){case 0:if(e.ok)return[3,5];s="".concat(e.status," ").concat(e.statusText),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.json()];case 2:return s=t.sent().error,[3,4];case 3:return t.sent(),[3,4];case 4:return[2,{success:!1,error:s}];case 5:return[2,e.json()]}})}),function(e){return t.apply(this,arguments)}))]})}),function(e){return a.apply(this,arguments)}),o=t(1664),f=t.n(o),x=t(7294),u=t(2920),h=function(){var e=(0,c._)((0,x.useState)(Date.now()),1)[0],s=(0,c._)((0,x.useState)([]),2),t=s[0],a=s[1];return(0,x.useEffect)(function(){d("https://jz-dot-meng.vercel.app/api/music/recentTracks").then(function(e){if(!e.success){u.Am.error("Unable to fetch recent tracks: ".concat(e.error));return}console.log({data:e}),a(e.data.recenttracks.track)})},[]),(0,l.jsx)("div",{className:"flex h-full p-8",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,l.jsx)("h4",{children:(0,l.jsx)(f(),{href:"/",children:"@jz-dot-meng"})}),(0,l.jsxs)("div",{className:"flex items-start flex-col gap-1 md:items-end md:flex-row",children:[(0,l.jsx)("h1",{children:"recently listened"}),(0,l.jsx)("span",{className:"pb-2",children:" :: live data for your perusal"})]})]}),(0,l.jsxs)("section",{className:"py-8 flex flex gap-4 overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex flex-[2] flex-col gap-1",children:[(0,l.jsxs)("div",{className:"flex gap-1 p-2 border-b border-white",children:[(0,l.jsx)("div",{className:"flex-1 flex items-center"}),(0,l.jsx)("div",{className:"flex-[2] flex items-center",children:"Name & Album"}),(0,l.jsx)("div",{className:"flex-1 flex items-center",children:"Artist"}),(0,l.jsx)("div",{className:"flex-1 flex items-center",children:"Last listened"})]}),(0,l.jsx)("div",{className:"flex flex-col gap-1 overflow-y-scroll no-scrollbar",children:t.map(function(s,t){var a=n(e,1e3*Number(s.date.uts));return(0,l.jsxs)("div",{className:"flex gap-1 py-2",children:[(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,l.jsx)("img",{src:s.image[2]["#text"],width:20,height:20,alt:"album-cover"})}),(0,l.jsxs)("div",{className:"flex-[2] flex-col",children:[(0,l.jsx)("div",{children:s.name}),(0,l.jsx)("div",{className:"text-xs text-grey-300",children:s.album["#text"]})]}),(0,l.jsx)("div",{className:"flex-1",children:s.artist.name}),(0,l.jsx)("div",{className:"flex-1 text-grey-600",children:a.dayElapsed>0?"".concat(a.dayElapsed," day").concat(a.dayElapsed>1?"s":""," ago"):a.hourElapsed>0?"".concat(a.hourElapsed," hr").concat(a.hourElapsed>1?"s":""," ago"):"".concat(a.minElapsed," min ").concat(a.secRemainder," sec ago")})]},"".concat(s.date["#text"],"-").concat(s.mbid))})})]}),(0,l.jsx)("div",{className:"flex flex-1"})]})]})})}}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=3906)}),_N_E=e.O()}]);