(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{3906:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/music/recently-listened",function(){return t(709)}])},709:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var c,a=t(1309),r=t(5893),n=function(e,s){var t=Math.floor((e-s)/1e3),c=Math.floor(t/86400),a=Math.floor((0===c?t:t-86400*c)/3600);return{dayElapsed:c,hourElapsed:a,minElapsed:Math.floor((0===c&&0===a?t:t-86400*c-3600*a)/60),secRemainder:t%60}},l=t(1010),i=t(655),o=(c=(0,l._)(function(e){return(0,i.Jh)(this,function(s){var t;return[2,fetch(e).then((t=(0,l._)(function(e){var s;return(0,i.Jh)(this,function(t){switch(t.label){case 0:if(e.ok)return[3,5];s="".concat(e.status," ").concat(e.statusText),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.json()];case 2:return s=t.sent().error,[3,4];case 3:return t.sent(),[3,4];case 4:return[2,{success:!1,error:s}];case 5:return[2,e.json()]}})}),function(e){return t.apply(this,arguments)}))]})}),function(e){return c.apply(this,arguments)}),d=t(1664),f=t.n(d),u=t(7294),x=t(2920),h=function(){var e=window.location.href.includes("localhost:3000")||!0,s=(0,a._)((0,u.useState)(Date.now()),1)[0],t=(0,a._)((0,u.useState)([]),2),c=t[0],l=t[1];return(0,u.useEffect)(function(){e?o("/api/music/recentTracks").then(function(e){if(!e.success){x.Am.error("Unable to fetch recent tracks: ".concat(e.error));return}console.log({data:e}),l(e.data.recenttracks.track)}):o("https://jz-dot-meng.vercel.app/api/music/recentTracks").then(function(e){if(!e.success){x.Am.error("Unable to fetch recent tracks: ".concat(e.error));return}console.log({data:e}),l(e.data.recenttracks.track)})},[e]),(0,r.jsx)("div",{className:"flex h-full p-8",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,r.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,r.jsx)("h4",{children:(0,r.jsx)(f(),{href:"/",children:"@jz-dot-meng"})}),(0,r.jsxs)("div",{className:"flex items-start flex-col gap-1 md:items-end md:flex-row",children:[(0,r.jsx)("h1",{children:"recently listened"}),(0,r.jsx)("span",{className:"pb-2",children:" :: live data for your perusal"})]})]}),(0,r.jsxs)("section",{className:"py-8 flex flex gap-4 overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex flex-[2] flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex gap-1 p-2 border-b border-white",children:[(0,r.jsx)("div",{className:"flex-1 flex items-center"}),(0,r.jsx)("div",{className:"flex-[2] flex items-center",children:"Name & Album"}),(0,r.jsx)("div",{className:"flex-1 flex items-center",children:"Artist"}),(0,r.jsx)("div",{className:"flex-1 flex items-center",children:"Last listened"})]}),(0,r.jsx)("div",{className:"flex flex-col gap-1 overflow-y-scroll no-scrollbar",children:c.map(function(e,t){var c=n(s,1e3*Number(e.date.uts));return(0,r.jsxs)("div",{className:"flex gap-1 py-2",children:[(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsx)("img",{src:e.image[2]["#text"],width:20,height:20,alt:"album-cover"})}),(0,r.jsxs)("div",{className:"flex-[2] flex-col",children:[(0,r.jsx)("div",{children:e.name}),(0,r.jsx)("div",{className:"text-xs text-grey-300",children:e.album["#text"]})]}),(0,r.jsx)("div",{className:"flex-1",children:e.artist.name}),(0,r.jsx)("div",{className:"flex-1 text-grey-600",children:c.dayElapsed>0?"".concat(c.dayElapsed," day").concat(c.dayElapsed>1?"s":""," ago"):c.hourElapsed>0?"".concat(c.hourElapsed," hr").concat(c.hourElapsed>1?"s":""," ago"):"".concat(c.minElapsed," min ").concat(c.secRemainder," sec ago")})]},"".concat(e.date["#text"],"-").concat(e.mbid))})})]}),(0,r.jsx)("div",{className:"flex flex-1"})]})]})})}}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=3906)}),_N_E=e.O()}]);