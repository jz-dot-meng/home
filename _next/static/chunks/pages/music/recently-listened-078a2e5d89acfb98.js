(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{2802:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/music/recently-listened",function(){return t(2884)}])},2884:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var l=t(4246),r=t(2147),s=t(7378),c=t(3354),a=function(e){var n=e.track,t=(0,s.useMemo)(function(){var e;return"@attr"in n&&(null===(e=n["@attr"])||void 0===e?void 0:e.nowplaying)},[n]),a=(0,s.useMemo)(function(){if("date"in n){var e=Date.now();return(0,r.E)(e,1e3*Number(n.date.uts))}},[n]);return(0,l.jsxs)("div",{className:"flex gap-1 py-2",children:[(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,l.jsx)("img",{src:n.image[2]["#text"],width:40,height:40,alt:"album-cover"})}),(0,l.jsxs)("a",{className:"flex-[2] flex-col flex justify-center",href:n.url,target:"_blank",children:[(0,l.jsx)("div",{children:n.name}),(0,l.jsx)("div",{className:"text-xs text-grey-300",children:n.album["#text"]})]}),(0,l.jsx)("div",{className:"flex-1 flex items-center text-xs md:text-base",children:n.artist.name}),(0,l.jsx)("div",{className:"flex-1 flex gap-2 text-grey-600 items-center text-xs md:text-base",children:t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.x,{}),(0,l.jsx)("div",{children:"Now playing"})]}):a?"".concat((0,r.w)(a)):""})]})},i=t(53),o=(0,s.forwardRef)(function(e,n){var t=e.children,r=e.itemsToShow,c=e.childrenLength,a=(0,i._)((0,s.useState)(0),2),o=a[0],d=a[1];(0,s.useEffect)(function(){d(c)},[c]);var f=(0,s.useMemo)(function(){return c>r},[c,r]),x=(0,i._)((0,s.useState)(!0),2),u=x[0],m=x[1];(0,s.useImperativeHandle)(n,function(){return{next:function(){return v()},prev:function(){return p()}}}),(0,s.useEffect)(function(){f&&!u&&(o>=c||o<=2*c-1)&&setTimeout(function(){return m(!0)},50)},[o,f,c]);var h=function(){f&&(0===o?(m(function(e){return!1}),d(c)):o===3*c-1&&(m(function(e){return!1}),d(2*c-1)))},v=function(){(f||o<c-r)&&d(function(e){return e+1})},p=function(){(f||o>0)&&d(function(e){return e-1})},j=(0,s.useMemo)(function(){return 3*c},[c]);return(0,l.jsx)("div",{className:"w-full overflow-hidden h-full",children:(0,l.jsxs)("div",{className:"flex no-scrollbar transition-all flex overflow-y-hidden h-full",style:{width:"calc(".concat(100*j,"%)"),transform:"translateX(".concat(-1*(100*o)/j,"%)"),transition:u?void 0:"none"},onTransitionEnd:function(){return h()},children:[t,t,t]})})});o.displayName="Carousel";var d=t(7235),f=t(9894),x=t.n(f),u=function(){var e=(0,d.q)(),n=e.weeklyTracks,t=e.weeklyArtists,r=e.latestTracks,c=(0,i._)((0,s.useState)([]),2),a=c[0],f=c[1];(0,s.useEffect)(function(){for(var e=[],t=0;e.length<4&&t<n.length;)!function(){var l=n[t],s=r.find(function(e){return e.name===l.name&&e.artist.name===l.artist["#text"]});s&&e.push({track:s,rank:l}),t++}();f(e)},[n,r]);var u=(0,s.useRef)(null),m=(0,s.useRef)(null),h=function(){var e,n;null===(e=u.current)||void 0===e||e.prev(),null===(n=m.current)||void 0===n||n.prev()},v=function(){var e,n;null===(e=u.current)||void 0===e||e.next(),null===(n=m.current)||void 0===n||n.next()};return(0,l.jsxs)("div",{className:"flex flex-col flex-1 gap-2 overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex border-b border-white p-2 text-sm",children:[(0,l.jsx)("div",{className:"pl-2 pr-2 md:pr-4 cursor-pointer",onClick:function(){return h()},children:"<"}),(0,l.jsx)("div",{className:"flex-1 px-2 md:px-4",children:(0,l.jsxs)(o,{itemsToShow:1,childrenLength:2,ref:u,children:[(0,l.jsx)("div",{className:"flex-1 text-right",children:"Top Tracks of the Week"}),(0,l.jsx)("div",{className:"flex-1 text-right",children:"Top Artists of the Week"})]})}),(0,l.jsx)("div",{className:"pl-2 md:pl-4 pr-2 cursor-pointer",onClick:function(){return v()},children:">"})]}),(0,l.jsx)("div",{className:"flex flex-1 items-center overflow-hidden",children:(0,l.jsxs)(o,{itemsToShow:1,childrenLength:2,ref:m,children:[(0,l.jsx)("div",{className:"grid grid-rows-2 grid-cols-2 gap-2 flex-1",children:a.map(function(e,n){return(0,l.jsxs)(x(),{className:"relative group",href:e.track.url,target:"_blank",children:[(0,l.jsx)("img",{src:e.track.image[2]["#text"],width:"100%",height:"100%",className:"group-hover:opacity-50"}),(0,l.jsxs)("div",{className:"hidden absolute group-hover:flex top-0 right-0 text-xs text-grey-800 bg-grey-300 p-1",children:["Played: ",e.rank.playcount," times in the last week"]}),(0,l.jsxs)("div",{className:"absolute bottom-0 right-0 flex flex-col p-2 w-full bg-grey-300/90 group-hover:underline group-hover:decoration-coral-400",children:[(0,l.jsx)("div",{children:e.track.name}),(0,l.jsx)("div",{className:"text-xs text-white",children:e.track.artist.name})]})]},"".concat(n,"-").concat(e.track.mbid))})}),(0,l.jsx)("div",{className:"flex overflow-y-scroll h-full no-scrollbar flex-1",children:(0,l.jsx)("div",{className:"flex flex-col gap-1 w-full",children:t.map(function(e,n){return(0,l.jsxs)("div",{className:"flex w-full p-2 gap-4 items-center",children:[(0,l.jsxs)("div",{className:"w-6",children:[n+1,"."]}),(0,l.jsxs)(x(),{className:"flex w-full items-center",href:e.url,target:"_blank",children:[(0,l.jsx)("div",{className:"flex-1",children:e.name}),(0,l.jsxs)("div",{className:"flex-1 text-xs text-white text-right",children:["played ",e.playcount," times"]})]},n)]},"".concat(n,"-").concat(e.name))})})})]})})]})},m=function(){var e=(0,d.q)(),n=e.init,t=e.latestTracks;return(0,s.useEffect)(function(){n()},[]),(0,l.jsx)("div",{className:"flex h-full p-8 overflow-scroll md:overflow-hidden",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,l.jsx)("h4",{children:(0,l.jsx)(x(),{href:"/",children:"@jz-dot-meng"})}),(0,l.jsxs)("div",{className:"flex items-start flex-col gap-1 md:items-end md:flex-row",children:[(0,l.jsx)("h1",{children:"recently listened"}),(0,l.jsx)("span",{className:"pb-2",children:" :: deep dive into my music tastes"})]})]}),(0,l.jsxs)("section",{className:"py-4 md:py-8 flex flex-col md:flex-row gap-4 md:overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex md:flex-[2] flex-col gap-1 overflow-hidden max-h-80 md:max-h-full",children:[(0,l.jsxs)("div",{className:"flex gap-1 p-2 border-b border-white text-sm",children:[(0,l.jsx)("div",{className:"flex-1 flex items-center"}),(0,l.jsx)("div",{className:"flex-[2] flex items-center",children:"Name & Album"}),(0,l.jsx)("div",{className:"flex-1 flex items-center",children:"Artist"}),(0,l.jsx)("div",{className:"flex-1 flex items-center",children:"Last listened"})]}),(0,l.jsx)("div",{className:"flex flex-col gap-1 overflow-y-scroll no-scrollbar",children:t.map(function(e,n){return(0,l.jsx)(a,{track:e},"".concat(n,"-").concat(e.mbid))})})]}),(0,l.jsx)("div",{className:"flex flex-col flex-1 max-h-80 md:max-h-full overflow-hidden",children:(0,l.jsx)(u,{})})]})]})})}},2147:function(e,n,t){"use strict";t.d(n,{E:function(){return l},w:function(){return s}});var l=function(e,n){var t=Math.floor((e-n)/1e3),l=Math.floor(t/86400),r=Math.floor((0===l?t:t-86400*l)/3600);return{dayElapsed:l,hourElapsed:r,minElapsed:Math.floor((0===l&&0===r?t:t-86400*l-3600*r)/60),secRemainder:t%60}},r=function(e){return"".concat(e," hr").concat(e>1?"s":"")},s=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.dayElapsed>0?"".concat((n=e.dayElapsed,"".concat(n," day").concat(n>1?"s":""))).concat(t?" ".concat(r(e.hourElapsed)," ").concat(e.minElapsed," min"):""," ago"):e.hourElapsed>0?"".concat(r(e.hourElapsed)).concat(t?" ".concat(e.minElapsed," min ").concat(e.secRemainder," sec"):""," ago"):"".concat(e.minElapsed," min").concat(t?" ".concat(e.secRemainder," sec"):""," ago")}}},function(e){e.O(0,[894,774,888,179],function(){return e(e.s=2802)}),_N_E=e.O()}]);