(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{3906:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/music/recently-listened",function(){return s(6021)}])},6021:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return m}});var t=s(5893),a=s(281),r=function(e,l){var s=Math.floor((e-l)/1e3),t=Math.floor(s/86400),a=Math.floor((0===t?s:s-86400*t)/3600);return{dayElapsed:t,hourElapsed:a,minElapsed:Math.floor((0===t&&0===a?s:s-86400*t-3600*a)/60),secRemainder:s%60}},i=s(7294),c=function(e){var l=e.track,s=(0,i.useMemo)(function(){var e;return"@attr"in l&&(null===(e=l["@attr"])||void 0===e?void 0:e.nowplaying)},[l]),c=(0,i.useMemo)(function(){if("date"in l)return r(Date.now(),1e3*Number(l.date.uts))},[l]);return(0,t.jsxs)("div",{className:"flex gap-1 py-2",children:[(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,t.jsx)("img",{src:l.image[2]["#text"],width:40,height:40,alt:"album-cover"})}),(0,t.jsxs)("a",{className:"flex-[2] flex-col flex justify-center",href:l.url,target:"_blank",children:[(0,t.jsx)("div",{children:l.name}),(0,t.jsx)("div",{className:"text-xs text-grey-300",children:l.album["#text"]})]}),(0,t.jsx)("div",{className:"flex-1 flex items-center text-xs md:text-base",children:l.artist.name}),(0,t.jsx)("div",{className:"flex-1 flex gap-2 text-grey-600 items-center text-xs md:text-base",children:s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.x,{}),(0,t.jsx)("div",{children:"Now playing"})]}):c?c.dayElapsed>0?"".concat(c.dayElapsed," day").concat(c.dayElapsed>1?"s":""," ago"):c.hourElapsed>0?"".concat(c.hourElapsed," hr").concat(c.hourElapsed>1?"s":""," ago"):"".concat(c.minElapsed," min ago"):""})]})},n=s(1309),d=s(8256),x=s(1664),o=s.n(x),f=function(){var e=(0,d.q)(),l=e.weeklyTracks,s=e.weeklyArtists,a=e.latestTracks,r=(0,n._)((0,i.useState)("TOP_TRACKS"),2),c=r[0],x=r[1],f=(0,n._)((0,i.useState)([]),2),m=f[0],h=f[1];(0,i.useEffect)(function(){for(var e=[],s=0;e.length<4&&s<l.length;)!function(){var t=l[s],r=a.find(function(e){return e.name===t.name&&e.artist.name===t.artist["#text"]});r&&e.push({track:r,rank:t}),s++}();h(e)},[l,a]);var u=function(e){x("TOP_ARTISTS"===c?"TOP_TRACKS":"TOP_ARTISTS")};return(0,t.jsxs)("div",{className:"flex flex-col flex-1 gap-2 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex border-b border-white justify-end p-2 text-sm",children:[(0,t.jsx)("div",{className:"pl-2 pr-4 cursor-pointer",onClick:function(){return u("LEFT")},children:"<"}),(0,t.jsxs)("div",{className:"flex-1 px-4",children:["TOP_TRACKS"===c&&(0,t.jsx)("div",{className:"w-full text-right",children:"Top Tracks of the Week"}),"TOP_ARTISTS"===c&&(0,t.jsx)("div",{className:"w-full text-right",children:"Top Artists of the Week"})]}),(0,t.jsx)("div",{className:"pl-4 pr-2 cursor-pointer",onClick:function(){return u("RIGHT")},children:">"})]}),(0,t.jsxs)("div",{className:"flex flex-1 items-center overflow-hidden",children:["TOP_TRACKS"===c&&(0,t.jsx)("div",{className:"grid grid-rows-2 grid-cols-2 gap-2 flex-1",children:m.map(function(e,l){return(0,t.jsxs)(o(),{className:"relative group",href:e.track.url,target:"_blank",children:[(0,t.jsx)("img",{src:e.track.image[2]["#text"],width:"100%",height:"100%",className:"group-hover:opacity-50"}),(0,t.jsxs)("div",{className:"hidden absolute group-hover:flex top-0 right-0 text-xs text-grey-800 bg-grey-300 p-1",children:["Played: ",e.rank.playcount," times in the last week"]}),(0,t.jsxs)("div",{className:"absolute bottom-0 right-0 flex flex-col p-2 w-full bg-grey-300/90 group-hover:underline group-hover:decoration-coral-400",children:[(0,t.jsx)("div",{children:e.track.name}),(0,t.jsx)("div",{className:"text-xs text-white",children:e.track.artist.name})]})]},"".concat(l,"-").concat(e.track.mbid))})}),"TOP_ARTISTS"===c&&(0,t.jsx)("div",{className:"flex overflow-y-scroll h-full no-scrollbar flex-1",children:(0,t.jsx)("div",{className:"flex flex-col gap-1 w-full",children:s.map(function(e,l){return(0,t.jsxs)("div",{className:"flex w-full p-2 gap-4 items-center",children:[(0,t.jsxs)("div",{className:"w-6",children:[l+1,"."]}),(0,t.jsxs)(o(),{className:"flex w-full items-center",href:e.url,target:"_blank",children:[(0,t.jsx)("div",{className:"flex-1",children:e.name}),(0,t.jsxs)("div",{className:"flex-1 text-xs text-white text-right",children:["played ",e.playcount," times"]})]},l)]})})})})]})]})},m=function(){var e=(0,d.q)(),l=e.init,s=e.latestTracks;return e.weeklyArtists,e.weeklyTracks,(0,i.useEffect)(function(){l()},[]),(0,t.jsx)("div",{className:"flex h-full p-8 overflow-scroll md:overflow-hidden",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,t.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,t.jsx)("h4",{children:(0,t.jsx)(o(),{href:"/",children:"@jz-dot-meng"})}),(0,t.jsxs)("div",{className:"flex items-start flex-col gap-1 md:items-end md:flex-row",children:[(0,t.jsx)("h1",{children:"recently listened"}),(0,t.jsx)("span",{className:"pb-2",children:" :: deep dive into my music tastes"})]})]}),(0,t.jsxs)("section",{className:"py-4 md:py-8 flex flex-col md:flex-row gap-4 md:overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex md:flex-[2] flex-col gap-1 overflow-hidden max-h-80 md:max-h-full",children:[(0,t.jsxs)("div",{className:"flex gap-1 p-2 border-b border-white text-sm",children:[(0,t.jsx)("div",{className:"flex-1 flex items-center"}),(0,t.jsx)("div",{className:"flex-[2] flex items-center",children:"Name & Album"}),(0,t.jsx)("div",{className:"flex-1 flex items-center",children:"Artist"}),(0,t.jsx)("div",{className:"flex-1 flex items-center",children:"Last listened"})]}),(0,t.jsx)("div",{className:"flex flex-col gap-1 overflow-y-scroll no-scrollbar",children:s.map(function(e,l){return(0,t.jsx)(c,{track:e},"".concat(l,"-").concat(e.mbid))})})]}),(0,t.jsx)("div",{className:"flex flex-col flex-1 max-h-80 md:max-h-full overflow-hidden",children:(0,t.jsx)(f,{})})]})]})})}}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=3906)}),_N_E=e.O()}]);