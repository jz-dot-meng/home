(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{2802:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/music/recently-listened",function(){return t(2884)}])},2884:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return m}});var n=t(4246),s=t(2147),r=t(7378),i=t(3354),c=function(e){var l=e.track,t=(0,r.useMemo)(function(){var e;return"@attr"in l&&(null===(e=l["@attr"])||void 0===e?void 0:e.nowplaying)},[l]),c=(0,r.useMemo)(function(){if("date"in l){var e=Date.now();return(0,s.Es)(e,1e3*Number(l.date.uts))}},[l]);return(0,n.jsxs)("div",{className:"flex gap-1 py-2",children:[(0,n.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,n.jsx)("img",{src:l.image[2]["#text"],width:40,height:40,alt:"album-cover"})}),(0,n.jsxs)("a",{className:"flex-[2] flex-col flex justify-center",href:l.url,target:"_blank",children:[(0,n.jsx)("div",{children:l.name}),(0,n.jsx)("div",{className:"text-xs text-grey-300",children:l.album["#text"]})]}),(0,n.jsx)("div",{className:"flex-1 flex items-center text-xs md:text-base",children:l.artist.name}),(0,n.jsx)("div",{className:"flex-1 flex gap-2 text-grey-600 items-center text-xs md:text-base",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.x,{}),(0,n.jsx)("div",{children:"Now playing"})]}):c?"".concat((0,s.wV)(c)):""})]})},a=t(53),d=(0,r.forwardRef)(function(e,l){var t=e.children,s=e.itemsToShow,i=e.childrenLength,c=(0,a._)((0,r.useState)(0),2),d=c[0],o=c[1];(0,r.useEffect)(function(){o(i)},[i]);var x=(0,r.useMemo)(function(){return i>s},[i,s]),f=(0,a._)((0,r.useState)(!0),2),u=f[0],m=f[1];(0,r.useImperativeHandle)(l,function(){return{next:function(){return v()},prev:function(){return p()}}}),(0,r.useEffect)(function(){x&&!u&&(d>=i||d<=2*i-1)&&setTimeout(function(){return m(!0)},50)},[d,x,i]);var h=function(){x&&(0===d?(m(function(e){return!1}),o(i)):d===3*i-1&&(m(function(e){return!1}),o(2*i-1)))},v=function(){(x||d<i-s)&&o(function(e){return e+1})},p=function(){(x||d>0)&&o(function(e){return e-1})},j=(0,r.useMemo)(function(){return 3*i},[i]);return(0,n.jsx)("div",{className:"w-full overflow-hidden h-full",children:(0,n.jsxs)("div",{className:"flex no-scrollbar transition-all flex overflow-y-hidden h-full",style:{width:"calc(".concat(100*j,"%)"),transform:"translateX(".concat(-1*(100*d)/j,"%)"),transition:u?void 0:"none"},onTransitionEnd:function(){return h()},children:[t,t,t]})})});d.displayName="Carousel";var o=t(7235),x=t(9894),f=t.n(x),u=function(){var e=(0,o.q)(),l=e.weeklyTracks,t=e.weeklyArtists,s=e.latestTracks,i=(0,a._)((0,r.useState)([]),2),c=i[0],x=i[1];(0,r.useEffect)(function(){for(var e=[],t=0;e.length<4&&t<l.length;)!function(){var n=l[t],r=s.find(function(e){return e.name===n.name&&e.artist.name===n.artist["#text"]});r&&e.push({track:r,rank:n}),t++}();x(e)},[l,s]);var u=(0,r.useRef)(null),m=(0,r.useRef)(null),h=function(){var e,l;null===(e=u.current)||void 0===e||e.prev(),null===(l=m.current)||void 0===l||l.prev()},v=function(){var e,l;null===(e=u.current)||void 0===e||e.next(),null===(l=m.current)||void 0===l||l.next()};return(0,n.jsxs)("div",{className:"flex flex-col flex-1 gap-2 overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex border-b border-white p-2 text-sm",children:[(0,n.jsx)("div",{className:"pl-2 pr-2 md:pr-4 cursor-pointer",onClick:function(){return h()},children:"<"}),(0,n.jsx)("div",{className:"flex-1 px-2 md:px-4",children:(0,n.jsxs)(d,{itemsToShow:1,childrenLength:2,ref:u,children:[(0,n.jsx)("div",{className:"flex-1 text-right",children:"Top Tracks of the Week"}),(0,n.jsx)("div",{className:"flex-1 text-right",children:"Top Artists of the Week"})]})}),(0,n.jsx)("div",{className:"pl-2 md:pl-4 pr-2 cursor-pointer",onClick:function(){return v()},children:">"})]}),(0,n.jsx)("div",{className:"flex flex-1 items-center overflow-hidden",children:(0,n.jsxs)(d,{itemsToShow:1,childrenLength:2,ref:m,children:[(0,n.jsx)("div",{className:"grid grid-rows-2 grid-cols-2 gap-2 flex-1",children:c.map(function(e,l){return(0,n.jsxs)(f(),{className:"relative group",href:e.track.url,target:"_blank",children:[(0,n.jsx)("img",{src:e.track.image[2]["#text"],width:"100%",height:"100%",className:"group-hover:opacity-50"}),(0,n.jsxs)("div",{className:"hidden absolute group-hover:flex top-0 right-0 text-xs text-grey-800 bg-grey-300 p-1",children:["Played: ",e.rank.playcount," times in the last week"]}),(0,n.jsxs)("div",{className:"absolute bottom-0 right-0 flex flex-col p-2 w-full bg-grey-300/90 group-hover:underline group-hover:decoration-coral-400",children:[(0,n.jsx)("div",{children:e.track.name}),(0,n.jsx)("div",{className:"text-xs text-white",children:e.track.artist.name})]})]},"".concat(l,"-").concat(e.track.mbid))})}),(0,n.jsx)("div",{className:"flex overflow-y-scroll h-full no-scrollbar flex-1",children:(0,n.jsx)("div",{className:"flex flex-col gap-1 w-full",children:t.map(function(e,l){return(0,n.jsxs)("div",{className:"flex w-full p-2 gap-4 items-center",children:[(0,n.jsxs)("div",{className:"w-6",children:[l+1,"."]}),(0,n.jsxs)(f(),{className:"flex w-full items-center",href:e.url,target:"_blank",children:[(0,n.jsx)("div",{className:"flex-1",children:e.name}),(0,n.jsxs)("div",{className:"flex-1 text-xs text-white text-right",children:["played ",e.playcount," times"]})]},l)]},"".concat(l,"-").concat(e.name))})})})]})})]})},m=function(){var e=(0,o.q)(),l=e.init,t=e.latestTracks;return(0,r.useEffect)(function(){l()},[]),(0,n.jsx)("div",{className:"flex h-full p-8 overflow-scroll md:overflow-hidden",children:(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,n.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,n.jsx)("h4",{children:(0,n.jsx)(f(),{href:"/",children:"@jz-dot-meng"})}),(0,n.jsxs)("div",{className:"flex items-start flex-col gap-1 md:items-end md:flex-row",children:[(0,n.jsx)("h1",{children:"recently listened"}),(0,n.jsx)("span",{className:"pb-2",children:" :: deep dive into my music tastes"})]})]}),(0,n.jsxs)("section",{className:"py-4 md:py-8 flex flex-col md:flex-row gap-4 md:overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex md:flex-[2] flex-col gap-1 overflow-hidden max-h-80 md:max-h-full",children:[(0,n.jsxs)("div",{className:"flex gap-1 p-2 border-b border-white text-sm",children:[(0,n.jsx)("div",{className:"flex-1 flex items-center"}),(0,n.jsx)("div",{className:"flex-[2] flex items-center",children:"Name & Album"}),(0,n.jsx)("div",{className:"flex-1 flex items-center",children:"Artist"}),(0,n.jsx)("div",{className:"flex-1 flex items-center",children:"Last listened"})]}),(0,n.jsx)("div",{className:"flex flex-col gap-1 overflow-y-scroll no-scrollbar",children:t.map(function(e,l){return(0,n.jsx)(c,{track:e},"".concat(l,"-").concat(e.mbid))})})]}),(0,n.jsx)("div",{className:"flex flex-col flex-1 max-h-80 md:max-h-full overflow-hidden",children:(0,n.jsx)(u,{})})]})]})})}}},function(e){e.O(0,[894,774,888,179],function(){return e(e.s=2802)}),_N_E=e.O()}]);